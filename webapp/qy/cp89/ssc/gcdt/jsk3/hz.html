<div class="lot-content clearfix">
    <div class="fl main-left">
        <div class="hd clearfix rehd tzgz" id="toptouzhu">
            <div class="fl refl">
                快捷金额：
                <input type="text" class="txt"/>
            </div>
            <div class="kjanniu">
                <a href="javascript:void(0)" class="img-50" data-num="50"></a>
                <a href="javascript:void(0)" class="img-100" data-num="100"></a>
                <a href="javascript:void(0)" class="img-500" data-num="500"></a>
                <a href="javascript:void(0)" class="img-1000" data-num="1000"></a>
                <a href="javascript:void(0)" class="img-5000" data-num="5000"></a>
                <a href="javascript:void(0)" class="img-10000" data-num="10000"></a>
            </div>
        </div>
        <div class="table-common">
            <table width="100%" border="1">
                <thead>
                <tr>
                    <th colspan="9">和值</th>
                </tr>
                <tr>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th>金额</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th>金额</th>
                    <th width="47">号码</th>
                    <th width="56">赔率</th>
                    <th>金额</th>
                </tr>
                </thead>

                <tbody>
                <tr>
                    <td><strong>3</strong></td>
                    <td><strong class="color-red pl" data-plid="11796"></strong></td>
                    <td><input type="text" class="table-txt" data-name="3" data-plid="11796"/></td>

                    <td><strong>4</strong></td>
                    <td><strong class="color-red pl" data-plid="11795"></strong></td>
                    <td><input type="text" class="table-txt" data-name="4" data-plid="11795"/></td>

                    <td><strong>5</strong></td>
                    <td><strong class="color-red pl" data-plid="11794"></strong></td>
                    <td><input type="text" class="table-txt" data-name="5" data-plid="11794"/></td>
                </tr>

                <tr>
                    <td><strong>6</strong></td>
                    <td><strong class="color-red pl" data-plid="11793"></strong></td>
                    <td><input type="text" class="table-txt" data-name="6" data-plid="11793"/></td>

                    <td><strong>7</strong></td>
                    <td><strong class="color-red pl" data-plid="11792"></strong></td>
                    <td><input type="text" class="table-txt" data-name="7" data-plid="11792"/></td>

                    <td><strong>8</strong></td>
                    <td><strong class="color-red pl" data-plid="11791"></strong></td>
                    <td><input type="text" class="table-txt" data-name="8" data-plid="11791"/></td>
                </tr>
                <tr>
                    <td><strong>9</strong></td>
                    <td><strong class="color-red pl" data-plid="11790"></strong></td>
                    <td><input type="text" class="table-txt" data-name="9" data-plid="11790"/></td>

                    <td><strong>10</strong></td>
                    <td><strong class="color-red pl" data-plid="11789"></strong></td>
                    <td><input type="text" class="table-txt" data-name="10" data-plid="11789"/></td>

                    <td><strong>11</strong></td>
                    <td><strong class="color-red pl" data-plid="11788"></strong></td>
                    <td><input type="text" class="table-txt" data-name="11" data-plid="11788"/></td>
                </tr>

                <tr>
                    <td><strong>12</strong></td>
                    <td><strong class="color-red pl" data-plid="11787"></strong></td>
                    <td><input type="text" class="table-txt" data-name="12" data-plid="11787"/></td>

                    <td><strong>13</strong></td>
                    <td><strong class="color-red pl" data-plid="11786"></strong></td>
                    <td><input type="text" class="table-txt" data-name="13" data-plid="11786"/></td>

                    <td><strong>14</strong></td>
                    <td><strong class="color-red pl" data-plid="11785"></strong></td>
                    <td><input type="text" class="table-txt" data-name="14" data-plid="11785"/></td>
                </tr>
                <tr>
                    <td><strong>15</strong></td>
                    <td><strong class="color-red pl" data-plid="11784"></strong></td>
                    <td><input type="text" class="table-txt" data-name="15" data-plid="11784"/></td>

                    <td><strong>16</strong></td>
                    <td><strong class="color-red pl" data-plid="11783"></strong></td>
                    <td><input type="text" class="table-txt" data-name="16" data-plid="11783"/></td>

                    <td><strong>17</strong></td>
                    <td><strong class="color-red pl" data-plid="11782"></strong></td>
                    <td><input type="text" class="table-txt" data-name="17" data-plid="11782"/></td>
                </tr>

                <tr>
                    <td><strong>18</strong></td>
                    <td><strong class="color-red pl" data-plid="11781"></strong></td>
                    <td><input type="text" class="table-txt" data-name="18" data-plid="11781"/></td>

                    <td><strong>单</strong></td>
                    <td><strong class="color-red pl" data-plid="11778"></strong></td>
                    <td><input type="text" class="table-txt" data-name="单" data-plid="11778"/></td>

                    <td><strong>双</strong></td>
                    <td><strong class="color-red pl" data-plid="11777"></strong></td>
                    <td><input type="text" class="table-txt" data-name="双" data-plid="11777"/></td>
                </tr>

                <tr>
                    <td><strong>大</strong></td>
                    <td><strong class="color-red pl" data-plid="11780"></strong></td>
                    <td><input type="text" class="table-txt" data-name="大" data-plid="11780"/></td>

                    <td><strong>小</strong></td>
                    <td><strong class="color-red pl" data-plid="11779"></strong></td>
                    <td><input type="text" class="table-txt" data-name="小" data-plid="11779"/></td>

                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>

                </tr>
                </tbody>
            </table>
        </div>

        <div class="btns">
            <button type="submit" class="btn btn-1">提交</button>
            <button class="btn btn-2">重设</button>
        </div>

        <div class="game_tables">
            <table width="100%" border="0" class="game_tab" id="bottom_zs_table_head">
                <tbody>
                <tr>
                    <th class="game_result choose" data-position="zh">总和</th>
                </tr>
                </tbody>
            </table>
            <table width="100%" border="0" class="game_tab" id="bottom_zs_table_select">
                <tbody>
                <tr>
                    <th class="game_result" data-type="dx">大小</th>
                    <th class="game_result choose" data-type="ds">单双</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                </tbody>
            </table>
            <div id="bottom_zs_table_content">
            </div>
        </div>
        <script>
            $(function () {
                $("#bottom_zs_table_head tbody tr th, #bottom_zs_table_select tbody tr th").click(function () {
                    $(this).parent().find(".choose").removeClass("choose");
                    $(this).addClass("choose");
                    changeTable();
                });

                refreshViewRight();
            });

            function changeTable() {
                var position = $("#bottom_zs_table_head tbody tr th.choose").data("position");
                var type = $("#bottom_zs_table_select tbody tr th.choose").data("type");
                $("#bottom_zs_table_content table").hide();

                $('#bottom_zs_table_' + position + '_' + type).show();
            }

            function refreshViewRight() {
                ajaxRequest({
                    url: "http://app.caicaike.com/api/ssc/ajaxGetHistory.json",
                    data: {
                        pageIndex: 1,
                        pageSize: 30,
                        playGroupId: playGroupId
                    },
                    success: function (json) {
                        if (json.result != 1) {
                            return;
                        }
                        var data = json.sscHistoryList;
                        data.reverse();

                        renderView(data);
                        changeTable();
                        renderViewRight(data);
                    }
                });
            }

            function renderViewRight(json) {
                var result = {
                    hezhi: {
                        da: {name: '和值-大', num: 0},
                        xiao: {name: '和值-小', num: 0},
                        dan: {name: '和值-单', num: 0},
                        shuang: {name: '和值-双', num: 0}
                    },
                    shunzi:{ name: '顺子',num: 0},
                    duizi:{ name: '对子',num: 0},
                    sanbutong:{ name: '三不同',num: 0},
                    baozi:{ name: '豹子',num: 0}

                };

                for (var i = 0; i < json.length; ++i) {
                    var value = json[i];
                    var openCode = value.openCode.split(",");
                    var num1 = Tools.parseInt(openCode[0]);
                    var num2 = Tools.parseInt(openCode[1]);
                    var num3 = Tools.parseInt(openCode[2]);

                    var sum = num1 + num2 + num3;
                    if(sum >= 11){
                        result.hezhi.da.num++;
                        result.hezhi.xiao.num = 0;
                    }else{
                        result.hezhi.xiao.num++;
                        result.hezhi.da.num = 0;
                    }

                    if(sum % 2 == 0){
                        result.hezhi.shuang.num++;
                        result.hezhi.dan.num = 0;
                    } else{
                        result.hezhi.dan.num++;
                        result.hezhi.shuang.num = 0;
                    }

                    if(num2 - num1 == 1 && num3 - num2 == 1){
                        result.shunzi.num++;
                        result.baozi.num = 0;
                        result.duizi.num = 0;
                        result.sanbutong.num = 0;
                    } else if(num1 == num2 == num3){
                        result.baozi.num++;
                        result.shunzi.num = 0;
                        result.duizi.num = 0;
                        result.sanbutong.num = 0;
                    } else if(num1 == num2 || num1 == num3 || num2 == num3){
                        result.duizi.num++;
                        result.shunzi.num = 0;
                        result.baozi.num = 0;
                        result.sanbutong.num = 0;
                    }else if(num1 != num2 != num3){
                        result.sanbutong.num++;
                        result.shunzi.num = 0;
                        result.baozi.num = 0;
                        result.duizi.num = 0;
                    }

                }

                var arr = [];
                arr.push(result.hezhi.da);
                arr.push(result.hezhi.xiao);
                arr.push(result.hezhi.dan);
                arr.push(result.hezhi.shuang);
                arr.push(result.shunzi);
                arr.push(result.duizi);
                arr.push(result.baozi);
                arr.push(result.sanbutong);

                arr.sort(function (a, b) {
                    var val1 = a.num;
                    var val2 = b.num;
                    if (val1 < val2) {
                        return -1;
                    } else if (val1 > val2) {
                        return 1;
                    } else {
                        return 0;
                    }
                });
                arr = arr.reverse();

                var str = '';
                str += '<div class="table-common table-border-color">';
                str += '<table width="100%" border="1">';
                str += '<tbody>';
                str += '<tr>';
                str += '<td colspan="2">长龙排行</td>';
                str += '</tr>';
                str += '<tr>';
                str += '<td colspan="2">统计至第' + json[json.length - 1].number + '期</td>';
                str += '</tr>';
                for (var i = 0; i < 5 && i < arr.length; ++i) {
                    str += '<tr>';
                    str += '<td width="142">' + arr[i].name + '</td>';
                    str += '<td>' + arr[i].num + '</td>';
                    str += '</tr>';
                }
                str += '</tbody>';
                str += '</table>';
                str += '</div>';
                $(".main-right").html(str);
            }

            function renderView(json) {
                var result = [];
                for (var i = 0; i < 4; ++i) {
                    result[i] = {ds: [], dx: []};
                }
                var str = '';
                $("#bottom_zs_table_head tbody tr th").each(function () {
                    var position = $(this).data("position");
                    if (position == 'zh') {
                        // 单双
                        str += '<table id="bottom_zs_table_' + position + '_ds" width="100%" border="0" class="resultLoad" style="display:none;">';
                        str += '<tbody>';
                        for (var i = 0; i < json.length; ++i) {
                            var value = 0;
                            for (var j = 0, tmpArr = json[i].openCode.split(","); j < tmpArr.length; ++j) {
                                value += Tools.parseInt(tmpArr[j]);
                            }

                            var name = value % 2 == 0 ? '<font style="color:#e70f0f;">双</font>' : '<font style="color:#58adff;">单</font>';
                            var x = 0, y = 0;

                            if (result[3].ds.length != 0) {
                                var preObj = result[3].ds[i - 1];
                                if (preObj.name == name) {
                                    x = preObj.x;
                                    y = preObj.y + 1;
                                } else {
                                    x = preObj.x + 1;
                                    y = 0;
                                }
                            }
                            result[3].ds.push({
                                name: name,
                                x: x,
                                y: y
                            });
                        }

                        var maxX = 30;
                        var maxY = 0;
                        $.each(result[3].ds, function (index, value) {
                            if (value.x > maxX) {
                                maxX = value.x;
                            }
                            if (value.y > maxY) {
                                maxY = value.y;
                            }
                        });

                        for (var i = 0; i < maxY + 1; ++i) {
                            str += '<tr class="resultLoad">';
                            for (var j = 0; j < maxX + 1; ++j) {
                                str += '<td>&nbsp;</td>';
                            }
                            str += '</tr>';
                        }
                        str += '</tbody>';
                        str += '</table>';


                        // 大小
                        str += '<table id="bottom_zs_table_' + position + '_dx" width="100%" border="0" class="resultLoad" style="display:none;">';
                        str += '<tbody>';
                        for (var i = 0; i < json.length; ++i) {
                            var value = 0;
                            for (var j = 0, tmpArr = json[i].openCode.split(","); j < tmpArr.length; ++j) {
                                value += Tools.parseInt(tmpArr[j]);
                            }
                            var name = value >= 11 ? '<font style="color:#e70f0f;">大</font>' : '<font style="color:#58adff;">小</font>';
                            var x = 0, y = 0;

                            if (result[3].dx.length != 0) {
                                var preObj = result[3].dx[i - 1];
                                if (preObj.name == name) {
                                    x = preObj.x;
                                    y = preObj.y + 1;
                                } else {
                                    x = preObj.x + 1;
                                    y = 0;
                                }
                            }
                            result[3].dx.push({
                                name: name,
                                x: x,
                                y: y
                            });
                        }

                        var maxX = 30;
                        var maxY = 0;
                        $.each(result[3].dx, function (index, value) {
                            if (value.x > maxX) {
                                maxX = value.x;
                            }
                            if (value.y > maxY) {
                                maxY = value.y;
                            }
                        });

                        for (var i = 0; i < maxY + 1; ++i) {
                            str += '<tr class="resultLoad">';
                            for (var j = 0; j < maxX + 1; ++j) {
                                str += '<td>&nbsp;</td>';
                            }
                            str += '</tr>';
                        }
                        str += '</tbody>';
                        str += '</table>';
                    }
                });

                $("#bottom_zs_table_content").html(str);
                for (var i = 0; i < 4; ++i) {
                    var value = result[i];

                    var pre = i == 3 ? 'zh' : i;
                    $.each(value.ds, function (index, value) {
                        $('#bottom_zs_table_' + pre + '_ds').find("tr").eq(value.y).find("td").eq(value.x).html(value.name);
                    });
                    $.each(value.dx, function (index, value) {
                        $('#bottom_zs_table_' + pre + '_dx').find("tr").eq(value.y).find("td").eq(value.x).html(value.name);
                    });
                }
            }
            ;
        </script>
    </div>

    <div class="fr main-right cl-10"></div>
</div>
<script>
    $(function() {
        $(".table-common table td").each(function() {
            if ($(this).find("input").length > 0) {

            } else {
                $(this).css({"cursor": "pointer"});
            }
        });
        // 点击变黄
        $(".main-left .table-common tbody tr td").click(function() {
            if ($(".main-left .fl input").length == 0) {
                return;
            }
            var val = $(".main-left .fl input").val();
            if (typeof val == 'undefined' || !val) {
                val = '';
            }

            if ($.inArray(playId, [227,239,251,286,303,336,390,390,402,414]) >= 0) { //$.inArray() 函数用于在数组中查找指定值，并返回它的索引值（如果没有找到，则返回-1）
                var index = $(this).index();
                if ($(this).find("input").length > 0) {
                } else if ($(this).find(".pl").length > 0) {
                    if ($(this).hasClass("bg-yellow")) {
                        $(this).removeClass("bg-yellow");
                        $(this).parent().prev().find("td").eq(index).removeClass("bg-yellow");
                        $(this).parent().next().find("td").eq(index).find("input").val("");
                    } else {
                        $(this).addClass("bg-yellow");
                        $(this).parent().prev().find("td").eq(index).addClass("bg-yellow");
                        $(this).parent().next().find("td").eq(index).find("input").val(val);
                    }
                } else {
                    if ($(this).hasClass("bg-yellow")) {
                        $(this).removeClass("bg-yellow");
                        $(this).parent().next().find("td").eq(index).removeClass("bg-yellow");
                        $(this).parent().next().next().find("td").eq(index).find("input").val("");
                    } else {
                        $(this).addClass("bg-yellow");
                        $(this).parent().next().find("td").eq(index).addClass("bg-yellow");
                        $(this).parent().next().next().find("td").eq(index).find("input").val(val);
                    }
                }
            } else if ($.inArray(playId, [223,235,247,207,258,318,382,406,394,480,494]) >= 0) {
                if ($(this).find("input").length > 0) {
                } else if ($(this).find(".pl").length > 0) {
                    if ($(this).hasClass("bg-yellow")) {
                        $(this).removeClass("bg-yellow");
                        $(this).next().find("input").val("");
                    } else {
                        $(this).addClass("bg-yellow");
                        $(this).next().find("input").val(val);
                    }
                }
            } else if ($.inArray(playId, [216, 217, 218, 221, 226, 228, 229, 230, 233, 238, 240, 241, 242, 245, 250,204,205,206,209,210,211,259,260,261,262,263,264,265,266,267,268,269,270,252,287,288,289,290,254,293,257,292,294,295,296,297,298,299,300,301,302,303,277,278,279,280,281,282,283,284,285,286,253,332,338,342,337,333,339,389,413,401,385,387,389,409,413,392,380,404,395,383,407,399,387,339,397,399,411,437,438,439,441,444,445,454,463,472,450,459,468,446,455,464,447,456,465,452,448,461,457,466,470,493,479,473,492,478,491,276]) >= 0) {
                if ($(this).find("input").length > 0) {
                } else if ($(this).find(".pl").length > 0) {

                    if ($(this).hasClass("bg-yellow")) {
                        $(this).removeClass("bg-yellow");
                        $(this).prev().find("input").length == 0 && $(this).prev().html() != '&nbsp;' && (typeof $(this).prev().html() != 'undefined' && $(this).prev().html().indexOf('和数') < 0) && $(this).prev().removeClass("bg-yellow");
                        $(this).next().find("input").val("");
                    } else {
                        $(this).addClass("bg-yellow");
                        $(this).prev().find("input").length == 0 && $(this).prev().html() != '&nbsp;' && (typeof $(this).prev().html() != 'undefined' && $(this).prev().html().indexOf('和数') < 0) && $(this).prev().addClass("bg-yellow");
                        $(this).next().find("input").val(val);
                    }
                } else if ($(this).html() != '&nbsp;' && ($(this).prev().find("strong").length == 0 || $(this).prev().find("strong").html() == 'undefined' || $(this).prev().find("strong").html().indexOf('和数') < 0)) {
                    if ($(this).find("strong").length > 0 && $(this).find("strong").html().indexOf('和数') >= 0 || $(this).find(".ball-icon").length > 0) {
                        return;
                    }
                    if ($(this).hasClass("bg-yellow")) {
                        $(this).removeClass("bg-yellow");
                        $(this).next().removeClass("bg-yellow");
                        $(this).next().next().find("input").val("");
                    } else {
                        $(this).addClass("bg-yellow");
                        $(this).next().addClass("bg-yellow");
                        $(this).next().next().find("input").val(val);
                    }
                }
            }
        });

        $(".main-left .table-common .touzhuArea tbody tr td").click(function() {
            if ($(this).find('input').length == 1) {
                return;
            }

            var val = $(".main-left .fl input").val();
            if (typeof val == 'undefined' || !val) {
                val = '';
            }
            if($.inArray(playId, [318,330,319,321,325,496,495]) >= 0){
                var obj = $(this).parent().children(':last-child').prevAll();
                var wu_flag = $(this).parent();
                if(obj.hasClass('bg-yellow')){
                    $(this).parent().children(':last-child').prevAll().removeClass("bg-yellow");
                    $(this).parent().children(':last-child').find("input").val("");
                }else {
                    if (!wu_flag.hasClass('wu')) {
                        $(this).parent().children(':last-child').prevAll().addClass("bg-yellow");
                        $(this).parent().children(':last-child').find("input").val(val);
                    }
                }
            }
        });

        // 幸运选号
        var tmpXyxhNums = getQueryString("nums");

        var tmpXyxhMoney = getQueryString("money");
        if (typeof tmpXyxhNums != 'undefined' && typeof tmpXyxhMoney != 'undefined' && tmpXyxhNums != '' && tmpXyxhMoney != '' && tmpXyxhNums != null && tmpXyxhMoney != null) {
            var oArr = [
                ['wan', '万位'],['qian', '千位'],['bai', '百位'],['shi', '十位'],['ge', '个位'],
                ['tm_b', '特码B'],
                ['gj', '冠军'],['jj', '季军'],['yj', '亚军'],['q4', '第四名'],['q5', '第五名'],['q6', '第六名'],['q7', '第七名'],['q8', '第八名'],['q9', '第九名'],['q10', '第十名']
            ];

            for (var i = 0; i < oArr.length; ++i) {
                tmpXyxhNums = tmpXyxhNums.replace(new RegExp(oArr[i][0],'gm'), oArr[i][1]);
            }

            $(".main-left .fl input").val(tmpXyxhMoney);
            var arr = tmpXyxhNums.split(",");


            for (var i = 0; i < arr.length; ++i) {
                var obj = $("[data-name='" + arr[i] + "']");
                $(obj).val(tmpXyxhMoney);
                $(obj).parent().prev().addClass("bg-yellow");
                $(obj).parent().prev().prev().addClass("bg-yellow");
            }
        }
    });
</script><script>
    var playGroupId = 20;
    var playId = 463;
    var playGroupName = '和值';

    function getZhudan() {
        var betForm = {
            totalMoney: 0,
            sscBetList: [],
            totalZhushu: 0
        };

        $(".main-left .table-common input").each(function () {
            var inputMoney = $(this).val();
            if (typeof inputMoney != 'undefined' && inputMoney != '') {
                betForm.sscBetList.push({
                    playGroupName: playGroupName,
                    playGroupId: playGroupId,
                    number: $("#number").data("number"),
                    playId: playId,
                    zhushu: 1,
                    perMoney: inputMoney,
                    content: $(this).data("name"),
                    playPlId: $(this).data("plid"),
                    playPl: $(this).data("pl")
                });
                betForm.totalMoney = add(betForm.totalMoney, inputMoney);
                betForm.totalZhushu = add(betForm.totalZhushu, 1);
            }
        });
        return betForm;
    }

    function checkZhudan() {
        return true;
    }
</script>