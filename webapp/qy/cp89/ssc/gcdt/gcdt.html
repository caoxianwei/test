<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <link rel="stylesheet" href="../../static/public/css/cabel-v1.css" type="text/css">
    <link rel="stylesheet" href="../../static/public/css/style.css" type="text/css"><!--页面CSS-->
    <link rel="stylesheet" href="../../static/public/css/animate.min.css" type="text/css"><!--CSS3动画-->
    <link rel="stylesheet" href="../../static/public/css/lottery.css" type="text/css"><!--页面CSS-->
    <link rel="stylesheet" href="../../static/public/css/liMarquee.css" type="text/css"><!--页面CSS-->
    <link rel="stylesheet" href="../../static/public/jRange/jquery.range.css" type="text/css">
    <link rel="stylesheet" href="../../static/public/css/global.css" type="text/css"><!--页面CSS-->
    <link rel="stylesheet" href="../../static/public/css/other.css" type="text/css"><!--页面CSS-->
    <link rel="stylesheet" href="../../static/public/css/gfwf.css" type="text/css"><!--页面CSS-->
    <script src="../../static/public/js/fancyzoom.js" language="JavaScript" type="text/javascript"></script>
    <script src="../../static/public/js/fancyzoomhtml.js" language="JavaScript" type="text/javascript"></script>
    <script>
        <!--
        // 屏蔽JS错误
        //    window.onerror = function(){return true;}
        // -->

        var nowHref = "../error/index.html";
    </script>
    <script src="../../static/public/js/mobile-detect.min.js"></script>
    <style>
    a:hover{
        color: red;

    }
    a:active{
        color:deepskyblue;
    }
</style>
    <style>
        .eveb_nav_sub .on,.button_1, .button_1:link, .button_1:visited,.alert_col h5,.onlineService,.head,.layui-layer-popup .layui-layer-title,.xzqd,.game_name .box2_stage p span i.acti,.Betting,.Single,.list_ject ul li .Result p a.acti,.list_ject ul li .Result p a.acti:hover,.top{background:#D32036!important}
        .eveb_nav_sub .on a,.bankInfo .name,.help_l_menu .title p .sum,.help_r_main .light,.game_name .box2_stage p span i,.game_name .box1_name  p i,.Account p a.red{color:#D32036!important}
        .eveb_nav_sub .on,.game_name .box2_stage p span{border:1px solid #D32036!important;}
        .eveb_nav_sub .on,.game_name .box2_stage p span i.acti{color:#fff!important;}
        .eveb_nav_sub .on a{border-top:1px #D32036 solid!important;}
        .eveb_nav_sub ul{border-bottom:1px #D32036 solid!important;}
        .alert_col div::-webkit-scrollbar-thumb {background-color: #D32036!important;}
    </style>
    <style>
        .head div h5,.Betting .tabs ul li,.top .nav h1{background:#B73638!important}
        .jf_box .url a,.eveb_form label.error,.eveb_transfer_box .center_wallet .money,.eveb_transfer_box .wallet_list li p{color:#B73638!important}
        .Betting .tabs ul li.acti{background:#fff!important}
        .button_1, .button_1:link, .button_1:visited{border:1px solid #B73638!important;}
    </style>
    <link rel="stylesheet" href="../../static/public/layer/skin/default/layer.css" id="layuicss-skinlayercss"></head>
<body marginwidth="0" marginheight="0">
<div class="list_ject" id="ssc_list">
    <ul></ul>
</div>

<script type="text/javascript" src="../../static/public/js/jquery.min.js"></script><!--jQuery库-->
<script type="text/javascript" src="../../static/public/js/scrollanim.min.js"></script> <!--"动画库"-->
<script src="../../static/public/js/type.js"></script><!--自定义封装函数-->
<script src="../../static/public/js/global.js"></script><!--自定义封装函数-->
<script src="../../static/public/js/jquery.cookie.js"></script><!--自定义封装函数-->
<script src="../../static/public/js/jquery.md5.js"></script><!--自定义封装函数-->
<script src="../../static/public/layer/layer.js"></script>
<script src="../../static/public/js/jquery.nicescroll.js"></script>
<script src="../../static/public/js/dateformat.js"></script>
<script src="../../static/public/js/template.js"></script>
<script src="../../static/public/js/swfobject/swfobject.js"></script>
<script src="../../static/public/js/jquery.limarquee.js"></script>
<script src="../../static/public/js/placeholders.jquery.min.js"></script>
<script src="../../static/public/jRange/jquery.range-min.js"></script>
<script src="../../static/public/js/rollups/tripledes.js"></script>
<script src="../../static/public/js/components/mode-ecb.js"></script>
<script src="../../static/public/js/move.js"></script>
<script src="../../static/public/js/base.js"></script>
<script>
    parent.showLoading();
    $(function() {
        //彩种列表
        ajaxRequest({
            url:CONFIG.BASEURL + 'baseData_latestList',
            success:function (json) {
                var data = json.data.items;
                var str ='';
                $.each(data,function (index, value) {
                    var o ='';
                    var type =value.type;
                    var url="";
                    var dataName = '';
                    if(value.type=='0'){//三分彩
                        url="sfssc";
                        dataName = 'bj3';
                    }else if(value.type=='1'){
                        url="pk10";
                        dataName = 'bjPk10';
                    }else if(value.type=='2'){
                        url="xy28";
                        dataName = 'xy28';
                    }else if(value.type=='3'){
                        url="cqssc";
                        dataName = 'cqSsc';
                    }else if(value.type=='4'){
                        url="pcdd";
                        dataName = 'bjLu28';
                    }else if(value.type=='5'){
                        url="klsf";
                        dataName = 'gdK10';
                    }else if(value.type=='6'){
                        url="tjssc";
                        dataName = 'tjSsc';
                    }else if(value.type=='7'){
                        url="xjssc";
                        dataName = 'xjSsc';
                    }else if(value.type=='8'){
                        url="kuailepuke3";
                        dataName = 'kuailepuke3';
                    }else if(value.type=='9'){
                        url="gd115";
                        dataName = 'gdPick11';
                    }else if(value.type=='10'){
                        url="jsk3";
                        dataName = 'jsK3';
                    }else if(value.type=='11'){
                        url="gxk10";
                        dataName = 'gxk10';
                    }else if(value.type=='12'){
                        url="lhc";
                        dataName = 'markSix';
                    }else if(value.type=='13'){
                        url="xyft";
                        dataName = 'luckyAirship';
                    }
                    str +='<li id="'+url+'" class="ss_xclass" >'+
                        '            <div class="pro_name">'+
                        '                <div class="pict">'+
                        '                    <img src="'+value.img+'" alt="">'+
                        '                </div>'+
                        '                <div class="text">'+
                        '                    <b>'+value.gameName+'</b>'+
                        '                    <p>第<i data-name="number">'+value.latestSessionNo+'</i>期销售中</p>'+
                        '                    <p>'+value.time+'</p>'+
                        '                </div>'+
                        '            </div>'+
                        '            <div class="Time at" style="min-height: 46px;">'+
                        '                <p data-name="tip">已开盘，欢迎投注。距下期还有:</p>'+
                        '                <div class="timer_wrap" data-name="time"><ol class="s"><span class="sp1">0</span><span class="sp2">0</span></ol><ol class="f"><span class="sp1">0</span><span class="sp2">0</span></ol><ol class="m"><span class="sp1">0</span><span class="sp2">0</span></ol></div>'+
                        '                <p class="p1" data-name="lastOpenData">上期开奖&nbsp;'+o+'</p>'+
                        '            </div>'+
                        '            <div class="Result">'+
                        '                <p>'+
                        '                    <a target="_blank" href="../../common/draw.html?open='+url+'">历史开奖</a>'+
                        '                    <a class="goZs" href="javascript:void(0)">开奖走势</a>'+
                        '                    <a href="javascript:void(0)" class="acti goCz" onclick="alert(1);parent.$("#rightContent").attr("src","../ssc/gcdt/'+url+'.html")">立即投注</a>'+
                        '                </p>'+
                        '            </div>'+
                        '        </li>';
                });
                $('#ssc_list ul').html(str);
                $(".Result p a.goCz").on('click',function () {
                    parent.$('#rightContent').attr('src','../ssc/gcdt/'+$(this).parent().parent().parent().attr('id')+'.html') ;
                });

                $(".Result p a.goZs").on('click',function () {
                    parent.$('#rightContent').attr('src','../ssc/zst/'+$(this).parent().parent().parent().attr('id')+'.html?type=1') ;
                });
                parent.hideLoading();
            }
        });
        $('.goCz').on('click',function () {
            alert($(this));
        });
    });


</script><script>
    //走势图页面
    function getZstPage(url) {
        if (typeof url == 'undefined') {
            url = 'index';
        }
        window.open("../../ssc/zst/" + url + ".html?type=1");
    }

    function getSscPage(url) {
        parent.getSscPage(url);
    }

    var getOpenCodeHistoryFlagArr = [];
    var getOpenCodeHistoryTimeArr = [];
    // 获取所有彩种开奖时间
    function getAllOpenTime() {
        ajaxRequest({
            url: CONFIG.BASEURL + "baseData_latestList",
            success: function(json) {
                if (json.code != 200) {
                    return;
                };
                $.each(json.data.items,function (index, value) {
                    var url="";
                    var dataName = '';
                    if(value.type=='0'){//三分彩
                        url="sfssc";
                        dataName = 'bj3';
                    }else if(value.type=='1'){
                        url="pk10";
                        dataName = 'bjPk10';
                    }else if(value.type=='2'){
                        url="xy28";
                        dataName = 'xy28';
                    }else if(value.type=='3'){
                        url="cqssc";
                        dataName = 'cqSsc';
                    }else if(value.type=='4'){
                        url="pcdd";
                        dataName = 'bjLu28';
                    }else if(value.type=='5'){
                        url="klsf";
                        dataName = 'gdK10';
                    }else if(value.type=='6'){
                        url="tjssc";
                        dataName = 'tjSsc';
                    }else if(value.type=='7'){
                        url="xjssc";
                        dataName = 'xjSsc';
                    }else if(value.type=='8'){
                        url="kuailepuke3";
                        dataName = 'kuailepuke3';
                    }else if(value.type=='9'){
                        url="gd115";
                        dataName = 'gdPick11';
                    }else if(value.type=='10'){
                        url="jsk3";
                        dataName = 'jsK3';
                    }else if(value.type=='11'){
                        url="gxk10";
                        dataName = 'gxk10';
                    }else if(value.type=='12'){
                        url="lhc";
                        dataName = 'markSix';
                    }else if(value.type=='13'){
                        url="xyft";
                        dataName = 'luckyAirship';
                    }
                    // 渲染数据
                    var obj = $("#" + url);

                    if ($(obj).length == 0) {
                        return;
                    }
                    $(obj).data("play_group_id", value.type);
                    $(obj).data("url", url);
                    $(obj).data("data_name", dataName);
                    $(obj).data("left_time",  0);
                    $(obj).data("number", value.sessionNo);
                    $(obj).data("last_number", value.openSessionNo);
                    $(obj).data("last_open_data", value.openResult);
                    $(obj).data('open_time',value.time);
                });
            },
            error: function(a, b, c) {
                // 失败重试
                setTimeout(function() {
                    getAllOpenTime();
                }, 5000);
            }
        });
    }
    $(function() {
        setTimeout(function () {
            getAllOpenTime();
        })
        // 时间倒计时
        function renderOpenTimeHtml() {
            $("#ssc_list ul li").each(function () {
                var number = $(this).data("number");
                var lastOpenData = $(this).data("last_open_data");
                var leftTime = Tools.parseInt($(this).data("left_time"));
                var playGroupId = $(this).data("play_group_id");
                var lastOpenNumber = $(this).data("last_number");
                var dataName = $(this).data("data_name");
                var dataUrl = $(this).data("url");
                var openTime = $(this).data("open_time");

                var time = 0;
                var str;

                time = leftTime;
                if(typeof number != 'undefined' && !number && number != null){
                    str = number.replace(dateFormat(new Date(), "yyyymmdd"), "") + "期已开盘，欢迎投注。距下期还有:";
                }

                $(this).data("left_time", time - 1);

                if (isNaN(time) || time < 0) {
                    return;
                }

                var hour = Math.floor(time / 60 / 60);
                time -= hour * 60 * 60;
                var minute = Math.floor(time / 60);
                time -= minute * 60;
                var second = time;
                var timeHtml = "";
                timeHtml += '<ol class="s">';
                timeHtml += '<span class="sp1">' + (Math.floor(hour / 10)) + '</span>';
                timeHtml += '<span class="sp2">' + (hour % 10) + '</span>';
                timeHtml += '</ol>';
                timeHtml += '<ol class="f">';
                timeHtml += '<span class="sp1">' + (Math.floor(minute / 10)) + '</span>';
                timeHtml += '<span class="sp2">' + (minute % 10) + '</span>';
                timeHtml += '</ol>';
                timeHtml += '<ol class="m">';
                timeHtml += '<span class="sp1">' + (Math.floor(second / 10)) + '</span>';
                timeHtml += '<span class="sp2">' + (second % 10) + '</span>';
                timeHtml += '</ol>';
                $(this).find('[data-name="time"]').html(timeHtml);
                $(this).find('[data-name="number"]').html(number);
                $(this).find('[data-name="tip"]').html(str);

                // 时间结束，获取新开奖时间
                if (leftTime == 0) {
                    getSscOpenTime2(dataName,dataUrl,number,playGroupId);
                    return;
                }

                var lastOpenDataHtml = "";

                if(typeof lastOpenData != 'undefined' && lastOpenData && lastOpenData != null){
                    var tmpArr = lastOpenData;
                    if(tmpArr.length == 0) {
                        $(this).find('[data-name="lastOpenData"]').html(lastOpenNumber + "期正在开奖中...");
                        return;
                    }
                    //获取上期开奖结果
                    if (playGroupId == '12') {
                            for (var i = 0; i < tmpArr.length ; ++i) {
                                if (i % 6 == 0 && i != 0) {
                                    lastOpenDataHtml += " &nbsp;+<i>" + tmpArr[i] + "</i>";
                                } else {
                                    lastOpenDataHtml += "<i>" + tmpArr[i] + "</i>";
                                }
                            };
                        }
                        else if (playGroupId == '4' || playGroupId == '10') {
                            for (var i = 0; i < tmpArr.length ; ++i) {
                                if (i < 4) {
                                    if (i == 2) {
                                        lastOpenDataHtml += "<i>" + tmpArr[i] + "</i> &nbsp;";
                                    } else if (i < 3) {
                                        lastOpenDataHtml += "<i>" + tmpArr[i] + "</i> &nbsp;+";
                                    } else {
                                        if (playGroupId == 4) {
                                            var color = '';
                                            var lastNum = tmpArr[tmpArr.length - 1];
                                            if (lastNum == 1 || lastNum == 4 || lastNum == 7 || lastNum == 10 || lastNum == 16 || lastNum == 19 || lastNum == 22 || lastNum == 25) {
                                                color = 'ball-green';
                                            } else if (lastNum == 2 || lastNum == 5 || lastNum == 8 || lastNum == 11 || lastNum == 17 || lastNum == 20 || lastNum == 23 || lastNum == 26) {
                                                color = 'ball-blue';
                                            } else if (lastNum == 3 || lastNum == 6 || lastNum == 9 || lastNum == 12 || lastNum == 15 || lastNum == 18 || lastNum == 21 || lastNum == 24) {
                                                color = '';
                                            } else if (lastNum == 0 || lastNum == 13 || lastNum == 14 || lastNum == 27) {
                                                color = 'ball-gray';
                                            }
                                            lastOpenDataHtml += "=<i class='" + color + "'>" + tmpArr[i] + "</i>";
                                        } else {
                                            lastOpenDataHtml += "=<i>" + tmpArr[i] + "</i>";
                                        }
                                        ;
                                    }
                                }
                                ;
                            };
                        }
                        else if (playGroupId == '9') {
                            for (var i = 0; i < tmpArr.length ; i++) {
	                            if( i < 4){
	                                lastOpenDataHtml += "<i>" + tmpArr[i] + "</i> &nbsp;+";
	                            } else if (i == 4) {
                                    lastOpenDataHtml += '<i>' + tmpArr[i] + '</i>';
                                } else if(i == 5){
                                    lastOpenDataHtml += " &nbsp;=<i>" + tmpArr[i] + "</i>";
                                }
                            };
                        } else if (playGroupId == '1' || playGroupId == '13') {
                            for (var i = 0; i < tmpArr.length ; ++i) {
                                lastOpenDataHtml += '<i class="fang bg-' + parseInt(tmpArr[i]) + '">' + tmpArr[i] + '</i>';
                            };
                        } else {
                            for (var i = 0; i < tmpArr.length ; ++i) {
                                lastOpenDataHtml += '<i>' + tmpArr[i] + '</i>';
                            };
                        };
                        if(parseInt(number) - parseInt(lastOpenNumber) == 1) {
                            $(this).find('[data-name="lastOpenData"]').html("上期开奖" + lastOpenDataHtml);
                        } else if(parseInt(number) - parseInt(lastOpenNumber) > 2){
                            $(this).find('[data-name="lastOpenData"]').html("上期开奖" + lastOpenDataHtml);
                        }else{
                            $(this).find('[data-name="lastOpenData"]').html((parseInt(lastOpenNumber)+1) + "期正在开奖中...");
                        }
                    };
            });
        }

        // 获取单彩种时间
        function getSscOpenTime2(dataName,url,sessionNo,playGroupId) {
            ajaxRequest({
                url: CONFIG.BASEURL + dataName+"_currentTime",
                success: function(json) {
                    if (json.code != 200) {
                        return;
                    }

                    var obj = $("#" + url);
                    if ($(obj).length == 0) {
                        return;
                    }

                    var json = json.data.obj;
                    $(obj).data("play_group_id", playGroupId);
//                    console.log(playGroupId+'-'+json.openTime);
                    try {
    					//console.log(url,json.openTime);
                        if (json.openTime) {
                            $(obj).data("left_time", json.openTime);
                            $(obj).data('open_time',json.openDate);
                            $(obj).find('p').eq(1).html(json.openDate);
                        }
                        ;

                    if(sessionNo == json.sessionNo){
                        return;
                    } else{
                        setTimeout(function () {
                            getSscOpenTime2(dataName,url,sessionNo,playGroupId);
                        },5000);
                    }
                    $(obj).data("number", json.sessionNo);

                } catch (e){
                    console.log(e);
                }
                    // 获取开奖历史
                    getOpenCodeHistory(dataName,url);
                },
                error: function(a, b, c) {
                    // 失败重试
                    setTimeout(function() {
                       getSscOpenTime2(dataName,url,sessionNo,playGroupId);
                    }, 5000);
                }
            });
        }
        var day = 0;
        // 获取开奖历史
        function getOpenCodeHistory(dataName,url, callback) {
            // 获取开奖历史
            ajaxRequest({
                url : CONFIG.BASEURL +dataName+ "_openList",
                data : {
                	today: day
                },
                success: function (json) {
                    if (json.code != 200) {
                        return;
                    }
//                    debugger;
                    if (json.data.items.length > 0) {
                    	day = 0;
                        var value = json.data.items[0];
                        var obj = $("#" + url);

                        if ($(obj).length == 0) {
                            return;
                        }
                        $(obj).data("last_number", value.sessionNo);
                        $(obj).data("last_open_data", value.resultItems);
                    } else {
                    	day = -1;
                    	getOpenCodeHistory(dataName,url); 
                    }


                    if (typeof callback == 'function') {
                        callback();
                    }
                },
                error: function() {
                    // 失败重试
                    setTimeout(function() {
                        getOpenCodeHistory(dataName,url, callback);
                    }, 5000);
                }
            });
        }
        setInterval(function () {
            renderOpenTimeHtml();
        }, 1000);

    });


</script>

</body></html>